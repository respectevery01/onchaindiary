# Altius 中文白皮书

## 1. 摘要

Altius 引入了一种虚拟机无关的执行框架，通过模块化设计优化区块链执行。其三模块架构实现了高性能执行、多链互操作性和改进的可扩展性。

Altius Stack 将区块链执行层与单一二进制实现和网络设计解耦，使其能够无缝集成任何 Layer 1、Layer 2 和应用特定的链，以实现即时性能提升和增强的互操作性。该架构旨在在多链未来实现链上用例的 Web2 兼容性，确保上线的链具有性能上的前瞻性。

## 2. 引言

### 问题陈述

今天的区块链系统面临着显著的挑战，包括网络拥堵、高交易成本以及对于有意见分歧的应用场景有限的可扩展性 — — 尽管通用区块空间仍在不断扩大。这些限制源自于单一执行层以及不足的互操作性，这使得网络在没有并行执行等可扩展性解决方案的情况下面临过时的风险。

并行处理是扩展的已研究且易于获取的解决方案，但许多链缺乏开发自己系统的资源。Altius 提供了一套开箱即用的模块化执行层来弥补这一差距，使链能够高效扩展并为其基础设施提供未来保障，而无需额外的开发工作。

### 使命

Altius 的使命是通过在执行层增强区块链的可扩展性和互操作性，使应用程序和生态系统能够充分发挥潜力。Altius 的目标是通过专注于共享执行基础设施来赋能多链生态系统：

- 高效的扩展解决方案，伴随连续升级以维持最优性能
- 跨链互操作性
- 为多线程并行处理环境设计的应用程序开发人员激励机制

### 范围

本文涵盖了 Altius 的架构、实现及其开发路线图。

## 3. 技术架构

Altius 的技术架构通过三个核心支柱来优化区块链执行：

1. **并行可扩展存储**：支持节点间的并发操作和高效状态更新。
2. **指令级并行 ism**: 使用静态单赋值（SSA）来识别并独立重执行冲突的指令。
3. **应用代码评估器**：奖励在执行环境中创建优化智能合约的开发者。

这些支柱增强了区块链执行的可扩展性、效率和互操作性。

## 并行可扩展存储

状态管理对于区块链性能至关重要，因为每次交易都会更新系统状态。传统系统在 SSD 上使用 Merkle-Patriciatries 会面临延迟和 I/O 瓶颈，随着区块链活动的增长，这些问题会变得更加严重。并行可扩展存储为状态数据管理提供了一种新的方法。

Altius 的并行可扩展存储解决方案使用切分状态管理、分布式缓存以及高级数据结构，以实现低延迟的高性能。本文探讨了其关键特性和优势。

**并行可扩展存储的基本原理**

系统将状态数据分区为在分布式节点上独立管理的分片，从而实现并行操作。分片通过键前缀进行分布，以实现均衡的工作负载。可扩展状态梅克尔 trie（SSMT）通过将特定的前缀范围（例如，0x00–0x10）分配给不同的节点来实现这一点。

为了最小化延迟，分布式缓存将频繁访问的数据保留在内存中，使用预取和历史模式。SSMT 通过高效的查询处理和工作负载均衡算法优化状态管理，防止性能瓶颈。

**建筑创新**

并行可扩展存储具有创新的动态负载均衡功能，以实现均匀的分片分布，针对并发优化的并行处理算法，内存优先设计以实现更快的访问，并具有容错功能以提高可靠性。

**SSMT 评估和基准**

我们使用以太坊主网数据集评估了 SSMT 的性能，将 Altius 执行引擎与 Deterministic OCC 和 SSMT 在每秒交易量（TPS）和每秒气体量（GPS）指标上进行了比较。在一台 32 核 128GB 服务器上，配备 100GB 高性能 SSD 的测试显示，对于大数据集，I/O 开销减少了 50%，性能提高了 1.2–1.5 倍。

SSMT 集成将平均 GPS 提升至约 657M，相比仅使用确定性 OCC 提高了 1.8 倍，在以太坊主网上则相比普通 GPS 提高了 30 倍。

结合 SSMT 后，平均每秒交易量（TPS）增加到约 6635，是仅使用确定性 OCC 提供的 TPS 的 1.6 倍，也是常规 TPS 的 25 倍，基于以太坊主网数据。

平行可扩展存储使用分布式内存优先存储，不同于传统的基于磁盘的区块链系统。与其他高性能设计依赖昂贵的大容量服务器不同，Altius 通过在标准硬件上实现缓存、分片和负载均衡来实现更高的效率。我们的系统将分片分布在内存缓存中，以实现更快的访问，而不是依赖会导致 I/O 瓶颈的集中式 SSD 存储。

更重要的是，除了降低硬件成本外，Altius 还具有前瞻性 — — 它能够与分布式存储高效扩展，而其他高性能设计依赖于单机存储，这在需求增长时会限制可扩展性。

**结论**

平行可扩展存储在区块链状态管理方面代表了一种范式转变。通过结合分片架构、分布式缓存以及优化的数据结构（如可扩展状态梅克尔树 SSMT），它克服了传统系统的局限性，提供了无与伦比的吞吐量、可扩展性和成本效率。随着区块链网络的发展，采用此类先进解决方案将是满足不断增长的去中心化生态系统需求的关键。

## 指令级并行性

传统区块链系统采用顺序交易执行，在冲突时由于需要完全重新执行交易而产生瓶颈。

Altius 的指令级并行性（ILP）同时处理单个指令，通过识别细粒度指令之间的依赖关系来减少冲突并提高性能。

**指令级并行的核心原则**

静态单赋值（SSA）转换智能合约字节码以跟踪指令依赖关系，从而实现并发执行。关键原则：

- 粒度执行：同时独立处理指令
- 依赖图分析：管理指令关系以实现最优排序
- 冲突最小化：通过指令级跟踪减少重新执行的需求

关键的 ILP 优化包括：

- SSA 转换：将字节码高效地转换以跟踪依赖关系
- 动态调度：基于依赖关系的并行处理
- 增量执行：尽管存在冲突仍持续进展

ILP 提高吞吐量，减少延迟，并最大化资源利用率，同时为开发者提供优化工具。

**SSA 评估和基准**

SSA 评估使用依赖图在执行过程中识别引起冲突的指令。性能通过将关键路径长度与原始 Gas 消耗进行比较来衡量，以确定 SSA 的效率增益。

Altius 通过选择性重新执行指令实现了 75% 的气体成本降低。

**结论**

指令级并行性通过并发处理和增强的效率来转变区块链执行。使用如静态单赋值（SSA）和确定性 OCC 等高级技术，ILP 超越了顺序处理的限制，提高了交易处理能力。这一创新将帮助区块链网络有效扩展，提供更好的性能和用户体验。

## 应用代码评估器

The Application Code Assessor 模块激励开发者创建能够最大化并行执行潜力的智能合约。

**确定性乐观并发控制（OCC）**

Altius 的确定性 OCC 通过假设并行执行来排序事务。当状态冲突发生时，事务会被确定性地回滚并重新执行，从而在冲突点之后保持操作的 gas 效率，同时识别冲突。

在冲突期间，后续交易会中止并在冲突点重新执行。多次中止浪费气体，并表明并行度降低。

**评估框架**

Altius 实施了一套评估框架来分析智能合约的性能并鼓励并行执行。它衡量交易效率并奖励高并行度。

系统会定期评估合同，分析交易依赖关系并计算有效的气体比例。

智能合约并行执行的适用性由以下因素评估：

- 事务并行度：更高的吞吐量表明更好的并行性
- 总气体量：更高的气体消耗表明合同利用更好

合同数据在期末用于计算奖励。

**确定性 OCC 评估和基准测试**

我们使用冲突免费的数据和以太坊主网的测量值，测试了确定性 OCC 的加速效果、每秒事务处理量（TPS）和每秒全局状态转换数（GPS），并考察了不同线程数下的表现。

确定性 OCC 的主要贡献是 Altius 的应用代码评估器，它通过激励减少交易冲突来提高性能。

使用 32 线程服务器，无冲突的事务在执行速度上比顺序执行快约 400 倍。

GPS 显著提升，通过增加线程数，达到约 70，基于无冲突交易的 32 线程国内服务器。

TPS 显著提升，添加线程数量后可达 ~2M，基于非冲突交易的 32 核国产服务器。

确定性 OCC 在基于以太坊主网数据的情况下，可以提供平均约 7 倍的速度提升。

确定性 OCC 能保证平均每秒 Gas (GPS) 约为 374M，这是常规 GPS 的 16 倍，基于以太坊主网数据。

确定性 OCC 保证平均每秒交易量（TPS）约为 4190，是常规 TPS 的 15 倍，基于以太坊主网数据。

**结论**

应用代码评估器（ACA）旨在通过鼓励应用程序开发者编写更高效的代码来进一步提升整体执行性能。它提供了工具和协议级别的评估，帮助智能合约开发者创建适用于多线程并行处理执行环境的应用程序。

## 4. 实现

Altius Stack 是我们实现的 VM 无关的模块化执行框架，并利用并行执行和高级状态管理来解决区块链的核心 inefficiencies。

通过将执行与共识分离，并利用模块化数据可用性层，Altius Stack 创建了一种比传统解决方案（如 Cosmos SDK 或 Geth）更具灵活性和韧性的区块链架构。

**Altius执行核心**

The Altius Execution Core 通过其并行执行引擎和可扩展数据缓存驱动 Altius Stack，从而在并发操作中实现快速交易和状态管理。

**并行执行引擎**

并行处理引擎是 Altius Stack 的核心组件，能够实现并行事务以提高吞吐量并降低延迟。它利用现代硬件高效处理不断增加的工作负载。

发动机有三个关键组件：

- 确定性 OCC（乐观并发控制与确定性中止）：支持一致冲突解决的并行事务执行。
- SSA（静态单赋值形式）：跟踪指令依赖性以减少重新执行的开销。
- SSMT (Scalable State Merkle Trie): 使用分片的 Merkle 树结构管理状态数据。通过键前缀将数据分布在节点上，并进行工作负载平衡以实现最佳性能。

**Layer 1 和 Layer 2 的并行处理能力**

Altius Stack 通过轻量级修改和可定制的解决方案，在 L1 和 L2 中实现并行处理。

**L1 整合**

Altius Core 与 L1 有两种集成方式：

- L1 不脱耦共识与执行：L1 提议者输出执行过的区块。Altius Core 通过并行执行帮助生成这些区块，从而消除性能瓶颈。示例：以太坊 1.0 和大多数较早的 L1 设计。
- L1 分解共识与执行：共识层提案者输出未执行的区块，然后执行节点处理这些区块。Altius Core 允许并行执行这些区块以提高吞吐量。示例：以太坊 2.0，一些基于 Cosmos 的链，如 Berachain。
- 对于解耦架构，Altius Core 的确定性并行执行确保所有节点获得一致的结果，维持 L1 的分布式一致性。

**L2 整合**

- 可定制的结算层：可选择以太坊结算、主权结算或自定义选项。
- 可定制的数据可用性层：可从现有的数据可用性提供商中选择，如 Celestia DA、Eigen DA 或自定义解决方案。

## 5. 开放执行网络：可扩展的无许可并行执行

**共享执行系统**

Altius 引入了一种共享执行系统，旨在应对跨多种区块链生态系统对可扩展性和高性能交易处理日益增长的需求。该系统的核心在于能够为任何链条 — — 无论是第 1 层还是第 2 层 — — 提供按需使用的并行交易执行能力。通过提供执行服务，Altius 允许链条卸载交易处理任务，从而提高吞吐量并降低成本。这一初始阶段将专注于为希望扩展其交易处理能力的链条提供稳健且成本效益高的执行服务。

**Open Execution Network**

虽然共享执行模型使 Altius 能够作为并行执行基础设施的中央提供商，但向开放执行网络（OEN）的过渡标志着执行去中心化的一个关键里程碑，并使区块链生态系统中的任何实体都能无缝参与。

Open Execution 网络旨在提供一个开放访问平台，任何参与者，无论是第 1 层、第 2 层还是特定应用的链，都可以利用并行执行能力，而无需获得许可或集中协调。通过从共享执行服务转变为完全去中心化、无需许可的模式，Altius 正在定位自己以支持一个分布式执行资源生态系统，任何人都可以在任何地方利用这些资源：

- 去中心化执行基础设施：在开放执行网络中，执行权限不再由中央提供者控制。相反，多个独立参与者（称为执行者）将能够贡献计算资源，以执行交易、智能合约和其他操作，跨越任何链。执行者将质押 Altius 的原生代币和目标链的原生代币，以竞标执行任务。这种双重质押模式确保了执行者与他们服务的链之间有强烈的激励对齐，从而保证网络的完整性和可靠性。
- 安全与问责：为了保护执行过程的完整性并防止恶意行为，Altius 将引入基于双重质押和罚没的激励和惩罚机制。未能诚实地履行其职责的执行者 — — 无论是通过操控结果、提供错误的执行，还是忽视其职责 — — 都将面临其所质押代币的罚没。这一机制激励高质量的执行，同时也为网络内的潜在恶意行为者提供了威慑。
- 无权限参与：OEN 设计旨在支持无权限参与，这意味着任何拥有必要资源（计算能力及质押资产）的人都可以加入网络并开始提供执行服务。网络中不会有中央权威机构控制准入，从而允许多样化的参与者加入。这种开放准入模式促进了区块链交易执行的更去中心化、更具弹性和可扩展的生态系统。

**网络效益**

Open Execution Network 在传统执行模型的基础上提供了显著的进展：

- 可扩展性：通过支持并行执行和分散执行资源，OEN 允许在区块链生态系统中实现更高的吞吐量。来自全球各地的执行器可以根据需求动态地贡献其计算资源以扩展系统。
- 效率：OEN 的去中心化和无许可性质为开发者和 dApp 用户降低了成本，通过提供共享计算资源的访问权限，防止执行服务被单一提供者垄断。OEN 提供的解决方案比传统中心化服务更具成本效益，符合 Altius 提高资源效率的目标。
- 弹性：通过分散执行提供者，减少了单点故障的风险，确保执行网络对任何参与者的故障、攻击或不当行为具有弹性。
- 跨链互操作性：开放执行网络中的执行器可以 interoperability 不同链（以太坊、以太坊 L2、altVM 链等）的代币，允许无缝执行跨链操作。这使得不同区块链生态系统之间的互操作性更加高效，增强了 Altius 致力于支持的多链未来。

## 6. 发展路线图

Altius 将通过 Altius Stack 成为提升区块链扩展性和跨链互操作性的主要解决方案，特别是在执行层。路线图突出了在多链未来扩展 Altius 能力的关键里程碑。

**时间线:**

- Altius 执行引擎核心支持 EVM L1/L2 集成，计划于 2025 年第一季度推出
- 在 2025 年第二季度扩展兼容性以支持多个 VM
- Q4 2025 年共享执行层发布
- Open Execution Network (OEN) 转型将于 2026 年第四季度完成

Altius Stack

通过将执行与网络设计解耦，Altius Stack 允许无缝集成 L1、L2 和应用特定的链，增强各种区块链解决方案之间的互操作性。这种模块化的方法支持从 EVM 到 MoveVM、CosmWasm 等多种 VM 环境，并进一步为开发者提供在任何链上构建优化应用的模板。

Altius Stack 的灵活性使其既兼容现有的区块链链，也兼容新开发的链，从而便于区块链生态系统的升级和配置。

**共享执行层**

Altius 将通过 Altius Stack 横向集成网络到一个共享执行层中，提供一种增强多链并行处理的执行基础设施。该解决方案将通过动态平衡提供优化的执行资源，使开发者能够提高去中心化应用（dApps）和智能合约的可扩展性并降低延迟。共享执行层将作为更广泛用例的基础，促进跨链操作并提高吞吐量和效率。

**通过ONE 进一步去中心化**

Altius 计划通过开放执行网络（OEN）过渡到完全去中心化的执行模型。这一转变将允许任何参与者，无论是链、应用程序还是去中心化实体，贡献计算资源并在任何区块链上执行交易。执行者将质押 Altius 的代币以及他们服务的链的原生代币，从而对齐激励机制并确保网络的可靠性。这一过渡将消除中心化的故障点，并创建一个无需许可、稳健且可扩展的执行生态系统，增强跨链互操作性并支持区块链技术的多链未来。

## 7. 结论

Altius 正在创建与任何链兼容的、高性能的执行层，以确保区块链基础设施的未来安全。Altius 力求在区块链可扩展性方面设定新标准，同时实现无缝跨链连接。借助 Altius，区块链生态系统将能够持续获得行业领先的执行性能，从而专注于构建重要的内容。

Altius 执行核心结合了 SSMT、SSA 和确定性 OCC 技术，以并行处理交易，并支持多个虚拟机。其模块化设计增强了系统的韧性，同时减少了集中化。Altius 还引入了一种新的奖励模型，通过激励应用程序开发者编写适合并行执行环境的智能合约，进一步提高执行性能。

该架构旨在解锁多链未来中的可扩展性和互操作性。Altius 不仅是基础设施提供商，它还在为一个未来奠定基础，在这个未来中，区块链可以实现 Web2 的效率同时保持去中心化的原则。

## 参考文献

- RainBlock: Faster Transaction Processing in Public Blockchains:[ https://www.usenix.org/conference/atc21/presentation/ponnapalli](https://www.usenix.org/conference/atc21/presentation/ponnapalli)
- Utilizing Parallelism in Smart Contracts on Decentralized Blockchains by Taming Application-Inherent Conflicts:[ https://arxiv.org/pdf/2201.03749](https://arxiv.org/pdf/2201.03749)
- A Decentralized Blockchain with High Throughput and Fast Confirmation：https://www.usenix.org/system/files/atc20-li-chenxing.pdf
- Operation-level Concurrent Transaction Execution for Blockchains：https://arxiv.org/pdf/2211.07911

## 术语表

- 静态单赋值（SSA）：一种编译器优化技术，确保每个变量只被赋值一次。在 Altius 中，SSA 通过跟踪依赖关系并减少重复执行来实现指令级并行 ism（ILP）。
- 确定性乐观并发控制（确定性 OCC）：一种并行执行模型，初始假设不存在冲突。如果出现冲突，受影响的事务将被确定性地回滚并选择性地重新执行，从而最小化气体浪费并最大化吞吐量。
- 可扩展状态默克尔 trie（SSMT）：一种分布式状态存储结构，通过分片前缀将数据分布在节点上。SSMT 提高了查询效率、负载均衡和状态同步，显著减少了 I/O 开销并提高了执行速度。