# ZK Rollups 与 Optimistic Rollups 详解

## 长话短说

- ZK Rollups 与 Optimistic Rollups 是以太坊两大主要 Layer 2 扩容方案。
- Optimistic Rollups 采用欺诈证明模型，具有延迟最终性。
- ZK Rollups 通过加密证明提供快速最终性和更强的安全性。
- ZK Rollups 虽然更复杂，但正迅速获得认可。
- Altius Labs 对两者都予以支持，并长期看好 ZK Rollups 在模块化 Web3 生态系统中的加密优势。

## 引言

以太坊作为主导性[智能合约](https://www.altiuslabs.xyz/learn/what-are-smart-contracts)平台的崛起伴随着一个代价：可扩展性。为满足需求，Layer 2 解决方案（L2）已成为最可行的前进路径。目前有两种 rollup 架构主导市场：ZK Rollups（零知识汇总）和 Optimistic Rollups（乐观汇总）。两者都显著降低了交易成本并提高了吞吐量，但它们的技术设计、性能权衡和长期可行性存在差异。

rollup 类型之间的竞争已成为区块链基础设施中最重要的话题之一。开发者、用户和基础设施提供商现在不仅需要理解这些 rollup 的运作方式，还需明确哪些方案最符合安全性、可组合性和去中心化等长期目标。随着 L2 生态系统日益复杂化及模块化趋势增强，问题不再在于 rollup 是否会扩展以太坊，而在于它们将如何重塑其未来。

## 基础机制

乐观汇总（Optimistic Rollups）基于乐观假设运行：除非被证明无效，否则所有提交的交易均视为有效。当批次数据发布至 L1 时，会进入一个挑战窗口期（通常为 7 天）。在此期间，任何人若认为某笔交易无效，均可提交欺诈证明。

相比之下，零知识汇总（ZK Rollups）则依托密码学确定性运作。每个交易批次都包含一个简洁的密码学证明（SNARK 或 STARK），用于验证状态转换的正确性。只有当证明通过验证时，以太坊才会接受该批次。

| 属性     | Optimistic Rollups（乐观汇总） | ZK Rollups（零知识汇总） |
| -------- | ------------------------------ | ------------------------ |
| 安全模型 | 博弈论（欺诈证明）             | 密码学（有效性证明）     |
| 信任假设 | 大多数观察者是诚实的           | 数学上的可靠性           |
| 证明提交 | 仅在受到质疑时提交             | 每一批次都需要提交       |

## 最终性与延迟

由于挑战窗口期的存在，乐观汇总面临最终性延迟问题。提现至以太坊 L1 通常需要延迟 7 天（尽管部分协议通过流动性提供者机制缓解此问题）。

另一方面，ZK Rollups 一旦有效性证明被提交并验证，即可提供近乎即时的最终性。这使得 ZK Rollups 对于需要快速退出选项的应用（如金融应用、支付和游戏）更具吸引力。

此外，从可组合性的角度来看，ZK Rollups 实现了近乎即时的 L2 到 L1 以及 L2 到 L2 的交互，减少了 Rollups 与基础层之间的摩擦。随着更多应用采用跨 Rollup 架构，这一点至关重要。

## EVM 兼容性与开发者体验

历史上，乐观 Rollups 在 EVM 兼容性方面具有显著先发优势。Arbitrum 和 Optimism 原生支持 Solidity，只需极少改动即可部署以太坊 dApp。

ZK Rollups 因通用计算生成有效性证明的复杂性而发展滞后。然而，随着 zkEVMs（如 zkSync Era、Scroll、Polygon zkEVM）的出现，这一差距正在迅速缩小。zkEVMs 试图在零知识环境中重建以太坊虚拟机——这是一项不简单的工程壮举。

尽管如此，zkEVM 上的开发者工具、调试和可组合性尚未达到乐观汇总方案的水平。这种权衡体现在速度与安全性相较于便利性之间的取舍。

值得注意的是，越来越多的人开始关注构建与特定 rollup 类型无关的 dApps，使其能在两种 rollup 上运行。开发者框架正在演进，以抽象化复杂性，使得智能合约能够同时部署到多个 L2 上。

## 成本效益与数据可用性

两种 rollup 技术都通过压缩和批量处理数据来降低交易成本，但 ZK rollups 通常数据效率更高。有效性证明体积小，允许在不损失可验证性的前提下进行激进压缩。

在某些情况下，乐观汇总可能因较低的证明成本（无需生成加密证明）而运营成本更低。然而，随着 ZK 证明通过硬件加速（如 zkPorter）和递归技术变得更加经济，这一优势正在逐渐减弱。

目前，这两种类型的 rollup 都依赖以太坊实现数据可用性（DA），这限制了可扩展性。模块化架构因此应运而生。诸如 Celestia 和 EigenDA 等新方案旨在将 DA 层与以太坊分离，从而为 rollup 带来更高的吞吐量和更低的费用。

共享排序和数据可用性层也正被探索作为统一 Rollup 基础设施同时保持主权的方式。这些创新可能对 ZK Rollups 尤为有利，因为它们的证明在大规模验证和聚合时成本更低。

## 模块化未来：Altius Labs 的定位

在 Altius Labs，我们视 rollups 为以太坊模块化未来的核心。执行层必须独立于共识和数据可用性进行扩展，而 rollups 正是实现这种模块化的关键。

Altius 支持 ZK Rollup 基础设施作为长期最优扩容方案，原因有三：

1. 快速确定性对于可组合的 DeFi 和实时应用至关重要。
2. 密码学保障消除了社会协调风险。
3. 模块化零知识证明堆栈与我们对于无需许可、可扩展的多链 Web3 愿景相契合。

尽管如此，我们近期积极整合并支持乐观汇总技术，尤其是在需要 EVM 等效性和开发者便利性以促进采用的情况下。Altius 从 ZK 电路到数据可用性层全方位工作，加速向可证明、可扩展执行的过渡。

我们正与互操作性提供商合作，为 rollups 之间构建共享安全层。我们致力于零知识桥和跨 rollup 消息传递的工作，旨在消除扩展解决方案之间的摩擦，为用户提供无缝体验。

### 结论

ZK 和乐观汇总代表了以太坊扩容方案的两个极端。乐观汇总提供了便利性和成熟度，但依赖于延迟最终性和经济安全性。ZK 汇总则提供即时最终性和加密完整性，但在技术上仍较为复杂。

随着证明技术的进步和 zkEVM 的成熟，我们预见一个以 ZK 为主导的未来，尤其适用于高频、安全关键或实时应用场景。

在 Altius Labs，我们正为这一未来而建设；投资于 ZK 研究，与模块化数据可用性层合作，并让构建者能够在以太坊提供的最安全、最高效的基础设施上部署应用。

**📄 想了解更多吗？**

[关注我们](https://x.com/altiuslabs)｜[加入Discord](https://discord.com/invite/altiuslabs)｜[TG](https://t.me/altiuslabs)

