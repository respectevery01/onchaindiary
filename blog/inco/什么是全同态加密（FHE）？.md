---
title: 什么是全同态加密（FHE）？
description: 全面解析全同态加密技术的工作原理、应用场景及其在区块链领域的革命性意义。
date: 2024-01-10
tags: [全同态加密, FHE, 加密技术, 区块链安全]
categories: [技术文档, 加密技术]
---

# 什么是全同态加密（FHE）？

加密技术存在一个问题。传统加密方法通过编码来保护数据，确保只有授权方才能使用特定密钥进行解码。虽然这些方法能有效保障数据在存储和传输过程中的安全，但进行任何计算都需要先解密数据，这会使数据面临潜在威胁。

用户数据曾因此类漏洞在黑客攻击中丢失。集中式服务器上的数据必须先解密才能处理，这意味着您在互联网上提供给任何第三方的信息几乎都会在某个环节暴露。目前的解决方案是将数据保存在受保护的孤岛中，但即便这些孤岛能得到充分保护且数据绝不泄露，也会阻碍数据的高效处理，同时用户必须极度信任数据接收方——您只能将医疗记录、财务历史等敏感数据托付给素未谋面的安全工程师，并寄望于他们能确保数据安全。

区块链解决了互联网中心化模式带来的诸多问题，但其加密模型本身也存在局限性。如果说中心化的数据处理方式存在弊端，那么公有链甚至缺乏能在不暴露数据的前提下处理信息的机制。以以太坊为代表的区块链天生具有透明特性，这意味着任何上链信息都能被互联网用户随意查看。虽然无需信任银行即可直接收取薪资，或跳过中介直接向朋友转账看似既酷炫又实用，但现有区块链的加密技术尚无法隐藏交易金额。真正的链上隐私交互方案（如基于零知识证明技术的隐私公链）往往需要牺牲区块链的可组合性等核心优势，以此换取极致的匿名性。

幸运的是，这些问题都有解决方案。全同态加密（FHE）代表了密码学和数据安全领域的范式转变。FHE 通过允许直接对加密数据执行计算而无需解密，打破了这些限制。这意味着敏感信息在其整个生命周期中都受到保护——即使在处理过程中也是如此。通过实现对加密数据的安全计算，FHE 为包括区块链在内的各个领域的隐私保护应用开辟了新的可能性。

## 全同态加密的工作原理

 那么什么是 FHE？

简单来说，FHE 是一种加密形式，能够在加密数据上执行计算并产生加密结果。当这个结果被解密时，它完全对应于直接在明文上执行操作的结果。听起来很神奇，对吧？

这里有一个简单的例子。假设你有一张黄色香蕉的 JPEG 图像文件。我们将文件加密，这样没人能看到它。现在，通过全同态加密（FHE），有人可以运行一个函数来改变图像的颜色。他们甚至一开始就不知道这是一根黄色香蕉，但他们通过对加密图像进行计算，将其变成了绿色。因此，我们得到了一根绿色的香蕉，但除了最初加密图像的人之外，没有人知道这是一根绿色的香蕉。他们可以在需要时解密，显示出绿色的香蕉。

这是一个抽象的例子，但当你处理像财务数据这样的信息时，情况就变得更有趣了。你可以在公共服务器上存储你的私人财务记录，而银行可以在不透露金额的情况下运行一个函数来为其分配利息。这将阻止你的财务信息被暴露的任何风险。相当酷。

让我们深入一步。全同态加密（FHE）允许对加密数据进行数学运算，生成加密结果，解密后与对明文执行相同运算的结果一致。如果你擅长数学，可以这样理解：

```
Enc(a + b) = Enc(a) + Enc(b)
Enc(a x b) = Enc(a) x Enc(b)
```

以下是 FHE 的一些核心原则。

- 公钥与私钥：全同态加密依赖于非对称加密技术。公钥用于加密数据，而私钥则用于解密。
- 同态运算：某些操作——如加法和乘法——可以直接在密文上执行。这些操作与其对应的明文运算等效。
- 解密：输出结果始终保持加密状态，直到被持有私钥的一方解密，确保全流程安全性。

如果你是技术人员，这里有一些更深入的解析。

- 噪声管理：由于全同态加密（FHE）基于格上的 LWE 设置（链接至 LWE 文章），在计算过程中，密文会累积噪声。为解决这一噪声管理问题，FHE 方案采用如自举（由 Craig Gentry 提出）（链接至 Gentry 文章）等技术来控制噪声，确保结果的正确性。
- 效率挑战：早期的全同态加密系统计算成本高昂，但现代方案如 BFV（Brakerski-Fan-Vaikuntanathan）和 TFHE（环面快速全同态加密）已在提升效率方面取得显著进展。

全同态加密（FHE）的发展目前进展如何？

从学术论证到 Zama 的 TFHE.rs/Concrete、微软的 SEAL 等开源库，全同态加密正稳步向实际应用过渡。学术界与工业界的协同努力持续优化这些技术以推动更广泛的应用。虽然仍有进步空间，但全同态加密现已达到可开始落地实施的阶段，这非常令人振奋。

## 全同态加密的应用场景

全同态加密最酷的一点在于它解锁了全新应用场景。若能实现既保障隐私又不牺牲实用性的技术，将催生无数有价值的应用。而现有加密模式往往要求数据被隔离保护——且绝对无法在未解密状态下进行运算。全同态加密为此提供了绝佳解决方案。

以下是全同态加密（FHE）可实现的部分应用场景。

### 医疗健康领域

目前，患者数据被隔离并受到保护，以保障患者隐私。健康记录理应保持高度机密，患者的资料无论如何都要受到保护。这通常意味着这些数据无法被处理或用于获取对公众有益的洞察。

通过全同态加密技术，研究人员能够从患者数据池中获取洞察，而无需直接访问数据本身。计算可以在不暴露原始数据的情况下进行，研究人员能够了解特定人群中并发症的发生频率，同时确保医疗数据始终处于加密状态。这将彻底改变医学研究的开展方式——大量此前被隔离的数据突然变得可用，且所有隐私都得到充分保护。

### 金融

金融领域存在许多全同态加密的潜在应用场景。我们仅列举其中几例。

金融机构经常与外部合作伙伴，如审计师、监管机构或分析公司协作。与这些第三方共享敏感数据可能带来重大的隐私和安全风险，尤其是在数据必须传输或外部存储的情况下。全同态加密（FHE）提供了一种变革性的解决方案，使得加密数据可以在不泄露内容的情况下被共享和处理。例如，审计师可以验证合规性或分析加密交易日志中的趋势，而不必查看原始数据。

### 人工智能与机器学习

人工智能革命正在进行中，但海量数据带来了一系列隐私问题。

如果存在数据泄露的风险，或者数据集是开源或公开可用的，您可能不愿意为机器学习模型提供数据。但借助全同态加密（FHE），数据可以在不暴露的情况下用于训练模型，从而为改进人工智能训练过程开辟了大量新数据来源。

这些只是全同态加密（FHE）可能应用的几个例子。但还有一个我们尚未提及的方面：FHE 能够通过增强隐私性，为区块链技术带来巨大的实用性。

## 全同态加密与区块链：强大的结合

像以太坊和比特币这样的公共区块链在透明度方面表现出色，但在机密性方面却存在不足。所有交易和智能合约的交互对所有参与者都是可见的，这对于需要处理敏感数据的应用来说是一个主要障碍。全同态加密（FHE）提供了一种变革性的解决方案，它能够在保持底层数据私密的同时，对加密数据进行计算。

目前，通过公共区块链执行工资支付甚至向朋友转账，都会向全球任何人展示您收到或发送的金额。这严重阻碍了其普及，因为公众和机构理所当然地不愿透露这些信息。其他加密模式，如零知识证明，牺牲了区块链的优势（如可组合性），使交易变得更加繁琐，而私有区块链则需要桥接，进一步增加了用户体验的障碍。采用全同态加密（FHE）技术，一切无需改变——用户可以使用最成熟的公共区块链（如以太坊），只需屏蔽其交易细节即可。如需了解更多信息，请查阅 Inco 和 Circle Research 提供的[机密 ERC20（cERC20）框架](https://www.inco.org/blog/circle-research-inco-confidential-erc20-report)。

在其他领域，金融机构希望将股票、大宗商品及其他资产上链，这需要一定的机密性保护，并能够授予监管机构特定访问权限。借助全同态加密（FHE）技术，它们可以在授予选定方访问权限的同时，屏蔽链上活动的细节。Inco [正在研究](https://www.inco.org/blog/inco-joins-erc3643-association)如何将全同态加密技术应用于 ERC3643 代币标准，该标准专为现实世界资产上链而设计。

全同态加密（FHE）在链上还有许多其他应用场景，包括游戏领域以及跨链隐私传输等基础设施问题。

## 全同态加密的未来

技术进步正在稳步拓展全同态加密（FHE）的能力边界。尽管当前 FHE 的速度和计算负荷仍是挑战，但相关领域正持续取得突破性进展。

研究人员持续开发更高效的全同态加密方案，致力于降低计算开销并优化噪声管理。批处理和密文打包等技术使得能够同时执行多项操作，从而进一步提升效率。

此外，硬件加速技术的整合，如专为全同态加密设计的 GPU、FPGA 和 ASIC，正带来革命性变化。这些技术大幅缩短了同态计算所需的时间，使其更适用于实时应用场景。

像 Zama 的 Concrete、微软的 SEAL 和 IBM 的 HELib 这类开源库正在快速发展，它们提供用户友好的 API 和优化算法，使得将全同态加密集成到现有系统中变得更加简便。

最后，将全同态加密与其他密码学技术（如多方计算（MPC）或零知识证明（ZKPs））相结合的做法正日益受到关注。这些混合方法在效率和隐私之间取得平衡，为复杂用例的实际部署铺平了道路。

这种强大的加密形式潜力无限。Inco 正在利用全同态加密技术为现有区块链构建隐私层，这将解锁在现有互联网中理所当然的主流应用场景。从链上领取薪水到购买债券和股票，很快都将成为数百万人日常生活的一部分，就像网购和电子邮件因全同态加密技术而普及一样——隐私保护正在彻底改变游戏规则。

了解更多关于 Inco 的信息，请查阅我们的[文档](https://docs.inco.org/home)。