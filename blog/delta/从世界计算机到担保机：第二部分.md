# 从世界计算机到担保机：第二部分

## 停止将区块链视为计算机

*这是关于为何我们需要域名系统的三部分系列文章的第二部分。*

- *第一部分：开发者视角下区块链并非适用工具的场景分析。*

- *第二部分：区分“计算机”与“担保机”的概念转变。*

- *第三部分：展示 “以域为载体的应用究竟是什么样”。*

“区块链应用”这一术语正是当前基于智能合约的可验证计算范式问题的核心。它暗示你应该在区块链上运行你的应用。实际上，区块链是糟糕的计算机，却是卓越的保证机器。它们的价值不在于它们能做什么，而在于它们能防止什么。

- 计算机：您的业务逻辑运行之处——数据流、模型、文件、副作用，一切既符合人体工程学又快速高效。
- 担保机：一个系统，其唯一职责是阻止不良状态转换并使结果可验证。想象“受限、明确的接口”，而非通用计算。

错误在于要求担保机模仿计算机。相反，我们应仅导出我们希望他人信任的声明，并证明这些声明满足明确的规则。

接下来，我们将探讨如何创建一个可验证系统，将计算机与可验证系统分离。也就是说，我们将使计算机摆脱所有类似区块链系统所施加的约束，转而直接添加明确的保障。

### 缩小保证范围

在第一部分的健身聚合器中，我们并不需要区块链来构建功能。我们需要它来让一个狭窄的声明对他人可信：“用户 X 在第 D 天的最大摄氧量为 65。”

通常，所有代码都可以分为功能需求（正向）和反需求（负向）。

一个有助于界定哪些内容属于保证机器的有效方法是拆分代码库：

- 功能性（积极）代码：创造价值的部分——数据流、模型、Slack 消息、导出功能、仪表板。
- 消极代码：防止不良结果的逻辑。这进一步分为：
  - 处理机制：重试、幂等性、数据回填、分页、速率限制——所有应对异常路径的措施。
  - 保障机制：交易对手关心的明确正确性条件。

对于健身应用，相关保障的示例包括：

- 前提条件（输入可接受）：可穿戴设备消息真实、设备与用户绑定、时间戳合理。
- 后置条件（输出合理）： `*10 ≤ VO₂ max ≤ 90*` 。
- 不变性（输出如何推导）：VO₂通过规范 `F_v` 计算得出。

原则：担保机不应执行功能代码或处理代码，通常也不应执行大多数担保。它仅需验证交易对手明确要求且版本化的最小担保集。

在此应用：我们可能会发布关于心肺功能（最大摄氧量、最快 5 公里跑）的保证，而对力量（最佳举重成绩）则不予公开。力量训练不在保证范围之内；而心血管健康的炫耀权则不受此限。

### 从区块链到汇总再到领域：将计算机从担保机中解放出来

历史上，可编程区块链通过复制执行来强制执行保障：每个验证者都重新运行相同的代码。这带来了确定性和安全性，但代价是能力（无套接字、无挂钟、无大型模型）和速度。

近年来，区块链领域涌现出一种新形态——rollups。Rollups 改变了我们获取保障的方式（采用密码学证明而非重新执行），但并未改变我们对保障层的要求：它们依然假设存在一个确定性计算机来证明完整执行。原有的限制条件依然存在。

出路在于缩小加密计算机的作用范围：

>  *仅运行您希望在加密计算机中公开的保证；其余一切在普通计算机上运行。*

这正是 “域” 的核心构成之一：保留你现有的系统（即计算机），并为其附加 “域内法则（local laws）”—— 明确声明 “关于输出结果的担保规则”。

另一半是共享状态。像 delta 这样的网络允许域在统一的全局法则体系下，将这些有保证的输出发布到一个公共账本上。这带来了：

- 无需许可的部署，
- 跨域可组合性（他人可以在你的声明基础上构建，你获得共享经济），
- 具有一致安全属性的单一真相来源。

**示例：**

- 全局法则（全网通用，持续生效）

  - 授权与归属：只有您能为您的账户发布声明（您的密钥进行签名）。
  - 防重放与排序：声明包含随机数，有序排列，并最终确定（避免重复发布“当日”结果）。
  - 版本控制：声明包含其所遵循规则的版本（以便消费者可以白名单化版本）。

- 域内法则（针对特定程序，自主选择）

  对于我们的应用来说，这些正是你的朋友（或打赌应用）在支付或评价你之前所需的条件。例如：

  - 输入来自您注册的设备，并经过供应商认证。
  - 传感器窗口覆盖全天（或整个运行过程），仅有少量有限间隔。
  - VO₂是通过指定的公式/模型版本计算得出的。

### 从世界计算机到担保机

过去十年间，人们试图将区块链打造成更强大的计算机：追求更高吞吐量、更多功能、更强大的虚拟机。但区块链的优势不在于它能做什么，而在于它拒绝让哪些情况发生。其价值是负向的：阻止未经授权或矛盾的状态转换，并使被接受的状态转换具有终局性和可归属性。这正是担保机的职责，而非应用运行时的任务。

delta 直接接纳了这一理念。它是一个由多个域组成的网络——每个域等于您现有系统（计算机）加上一个狭窄但经过密码学验证的接口（保障机）。计算机保留其套接字、文件、模型和快速部署功能。保障机仅强制执行您希望他人依赖的最小化、明确规则。

与其将 delta 视为“世界计算机”，不如将其看作一个共享的 USB 集线器。任何系统只需通过轻量级适配器接入，即可发布其希望共享的状态（例如“2025 年 8 月 24 日最大摄氧量=65”），同时保持其余数据私有（如原始心跳间隔、力量记录）。该集线器在强制执行一套统一的全局法则（授权、排序、重放保护、版本控制）的同时，也兼容各领域的域内法则（例如认证设备数据、覆盖时间窗口、固定计算规范）。其结果是构建出可组合、可信的共享状态——无需将整个应用拖入复制性、确定性的执行过程中。

接下来，我们将在 delta 上构建健身聚合器作为一个域：包括瘦适配器、针对 VO₂和最快 5 公里的域内法则规范，以及其他应用如何利用这些声明进行支付和排名。

